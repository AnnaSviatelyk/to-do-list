!function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);const s={inputSummary:".task__description",newItem:".new-item",createNewItem:".add-new-item",input:".add-new-item__description",enableEdit:".task__name",submitBtn:".add-new-item__btn-add-task",cancelBtn:".add-new-item__btn-cancel",tasksContainer:".tasks-container",deleteBtn:".task__btn-delete",editBtn:".task__btn-edit",doneBtn:".task__btn-done",BtnsContainer:".task__btns",editBtnsContainer:".task__btns--edit",exitEditBtn:".task__btn-exit-edit",taskCheckbox:".task__checkbox_svg",taskCheckboxContainer:".task__checkbox",inputForTaskUpdate:".task__edit-input-text",taskNameWrapper:".task__name-wrapper",time:".header__data--time",date:".header__data--date"};function a(e){return e<10?`0${e}`:e}var i=class{constructor(e){this.summary=e,this.id=function(e=5){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=n.length;for(let a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*s));return t}(5)}};const r='<i class="task__btn-done"></i>\n<i class="task__btn-exit-edit"></i>',c='<i class="task__btn-edit"></i>\n<i class="task__btn-delete"></i>',d=37,o=100;var l=class{constructor(){this.updateSummary=this.updateSummary.bind(this),this.keyPressHandler=this.keyPressHandler.bind(this),this.editBtnClickHandler=this.editBtnClickHandler.bind(this),this.documentClickHandler=this.documentClickHandler.bind(this),this.clickOnExitBtnHandler=this.clickOnExitBtnHandler.bind(this),this.checkboxDisplayHandler=this.checkboxDisplayHandler.bind(this)}addTaskToUI(e){const t=document.querySelector(s.tasksContainer),n=this.getTaskHtmlString(e);t.insertAdjacentHTML("beforeend",n);const a=document.getElementById(e.id);this.addTaskEventListeners(a)}removeTaskFromUI(e){const t=document.getElementById(e);t.style.marginLeft="-100px",t.style.opacity="0",t.style.transition="all 0.3s",t.style.transitionTimingFunction="cubic-bezier(0.42, 0, 1, 1)",setTimeout(()=>{t.parentNode.removeChild(t)},300)}addTaskEventListeners(e){e.querySelector(s.editBtn).addEventListener("click",this.editBtnClickHandler),e.querySelector(s.deleteBtn).addEventListener("click",m.deleteTask),e.querySelector(s.taskCheckbox).addEventListener("animationend",m.deleteTask)}editBtnClickHandler(e){const t=e.target.closest(".task"),n=t.querySelector(".task__name").textContent,a=e.target.closest(s.BtnsContainer);this.checkboxDisplayHandler(t),a.innerHTML=r;const i=document.getElementById(t.id).querySelector(s.taskNameWrapper),c=i.firstElementChild.offsetHeight;document.querySelector(s.doneBtn).addEventListener("click",this.updateSummary),document.querySelector(s.exitEditBtn).addEventListener("click",e=>{this.clickOnExitBtnHandler(e,n,i,a)});const d=`<textarea class="task__edit-input-text " type="text" autofocus>${n}</textarea>`;i.innerHTML=d;const l=i.firstChild;l.select(),l.addEventListener("input",this.inputHandler),document.addEventListener("click",this.documentClickHandler,!0),l.addEventListener("keypress",this.keyPressHandler);let u=Math.min(o,c);const k=parseFloat(window.getComputedStyle(l,null).getPropertyValue("padding-top"));l.style.height=u+2*k+"px"}checkboxDisplayHandler(e){const t=e.querySelector(s.taskCheckboxContainer);t.classList.contains("task__checkbox--hidden")?t.classList.remove("task__checkbox--hidden"):t.classList.add("task__checkbox--hidden")}clickOnExitBtnHandler(e,t,n,s){const a=` <span class="task__name">${t}</span>`,i=e.target.closest(".task");n.innerHTML=a,s.innerHTML=c,this.checkboxDisplayHandler(i),this.addTaskEventListeners(i),document.removeEventListener("click",this.documentClickHandler,!0)}documentClickHandler(e){const t=e.target.classList[0];["task__edit-input-text","task__btn-done","task__btn-exit-edit"].includes(t)||this.updateSummary()}inputHandler(e){const t=e.target.value;if(e.target.rows=1,e.target.style.height="auto",""===t)e.target.style.height=d+"px",e.target.classList.add("task__edit-input-text--invalid");else{const t=e.target.scrollHeight;let n=Math.min(o,t);e.target.style.height=n+"px",e.target.classList.remove("task__edit-input-text--invalid")}}keyPressHandler(e){13===e.keyCode&&(e.preventDefault(),""!==e.target.value&&this.updateSummary(e))}updateSummary(){const e=document.querySelector(s.inputForTaskUpdate),t=e.value,n=e.closest(".task"),a=n.id,i=n.querySelector(s.BtnsContainer),r=n.querySelector(s.taskNameWrapper);if(this.checkboxDisplayHandler(n),""!==t){document.removeEventListener("click",this.documentClickHandler,!0);const e=` <span class="task__name">${t}</span>`;i.innerHTML=c,r.innerHTML=e,this.addTaskEventListeners(n),m.updateTask(a,t)}}getTaskHtmlString(e){return`<div class="task" id="${e.id}">\n        <div class="task__content-wrapper">\n        <div class="task__description">\n        <label class='task__checkbox'>\n        <input type="checkbox" name="check">\n        <svg version="1.1" class="task__checkbox_svg" xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100"\n            style="enable-background:new 0 0 100 100;" xml:space="preserve">\n            <polyline class="task__checkbox_line" points="3.5,45.5 40.5,82.5 95.7,15.3 "\n                stroke-linecap="round" /></svg>\n    </label>\n    \n    <div class="task__name-wrapper">\n    <span class="task__name" title="${e.summary}">${e.summary}</span>\n    </div>\n    </div>\n    <div class="task__btns">\n    <i class="task__btn-edit"></i>\n    <i class="task__btn-delete"></i>\n    </div>\n    </div>\n    <div class="line"></div></div>`}};const u=new class{constructor(){this.tasks=[]}createTask(e){const t=new i(e);return this.tasks.push(t),this.saveChangesToLocalStorage(),t}readTasks(){return this.tasks=JSON.parse(localStorage.getItem("tasks"))||[],this.tasks}deleteTask(e){const t=this.tasks.findIndex(t=>t.id===e);-1!==t&&this.tasks.splice(t,1),this.saveChangesToLocalStorage()}updateTask(e,t){this.tasks.find(t=>t.id===e).summary=t,this.saveChangesToLocalStorage()}saveChangesToLocalStorage(){localStorage.setItem("tasks",JSON.stringify(this.tasks))}},k=new l;var m=new class{createTask(e){const t=u.createTask(e);k.addTaskToUI({...t})}renderTasks(){u.readTasks().forEach(e=>k.addTaskToUI(e))}deleteTask(e){const t=e.target.closest(".task").id;u.deleteTask(t),k.removeTaskFromUI(t),u.saveChangesToLocalStorage()}updateTask(e,t){u.updateTask(e,t)}};(()=>{const e=document.querySelector(s.newItem),t=document.querySelector(s.createNewItem),n=document.querySelector(s.submitBtn);m.renderTasks(),document.querySelector(s.newItem).addEventListener("click",()=>{e.style.display="none",t.style.display="inline-block",document.querySelector(s.input).value=""});const i=n=>{n.length&&(m.createTask(n),e.style.display="inline-flex",t.style.display="none")};document.querySelector(s.submitBtn).addEventListener("click",()=>{const e=document.querySelector(s.input).value;n.classList.add("add-new-item__btn-add-task--disabled"),i(e)}),document.querySelector(s.input).addEventListener("keypress",e=>{if(13===e.keyCode){const t=e.target.value;i(t)}}),document.querySelector(s.input).addEventListener("input",()=>{n.classList.remove("add-new-item__btn-add-task--disabled")}),document.querySelector(s.cancelBtn).addEventListener("click",()=>{e.style.display="inline-flex",t.style.display="none"});const{day:r,month:c,year:d,hours:o,minutes:l}=function(){const e=new Date,t=e.getDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],s=e.getFullYear();let i=e.getHours();i=a(i);let r=e.getMinutes();return{day:t,month:n,year:s,hours:i,minutes:r=a(r)}}();document.querySelector(s.date).textContent=`${r} ${c}, ${d}`,document.querySelector(s.time).textContent=`${o}:${l}`})()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2RvbVN0cmluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL1Rhc2suanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL1Rhc2tWaWV3LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9UYXNrc0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL1Rhc2tNb2RlbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkRPTXN0cmluZ3MiLCJpbnB1dFN1bW1hcnkiLCJuZXdJdGVtIiwiY3JlYXRlTmV3SXRlbSIsImlucHV0IiwiZW5hYmxlRWRpdCIsInN1Ym1pdEJ0biIsImNhbmNlbEJ0biIsInRhc2tzQ29udGFpbmVyIiwiZGVsZXRlQnRuIiwiZWRpdEJ0biIsImRvbmVCdG4iLCJCdG5zQ29udGFpbmVyIiwiZWRpdEJ0bnNDb250YWluZXIiLCJleGl0RWRpdEJ0biIsInRhc2tDaGVja2JveCIsInRhc2tDaGVja2JveENvbnRhaW5lciIsImlucHV0Rm9yVGFza1VwZGF0ZSIsInRhc2tOYW1lV3JhcHBlciIsInRpbWUiLCJkYXRlIiwiZm9ybWF0VGltZSIsImpzX1Rhc2siLCJbb2JqZWN0IE9iamVjdF0iLCJzdW1tYXJ5IiwidGhpcyIsImlkIiwibGVuZ3RoIiwicmVzdWx0IiwiY2hhcmFjdGVycyIsImNoYXJhY3RlcnNMZW5ndGgiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJtYWtlaWQiLCJkb25lRXhpdEJ0bnMiLCJlZGl0RGVsZXRlQnRucyIsInNwYW5IZWlnaHRXaXRoT25lTGluZSIsIm1heFRleHRBcmVhSGVpZ2h0IiwianNfVGFza1ZpZXciLCJ1cGRhdGVTdW1tYXJ5Iiwia2V5UHJlc3NIYW5kbGVyIiwiZWRpdEJ0bkNsaWNrSGFuZGxlciIsImRvY3VtZW50Q2xpY2tIYW5kbGVyIiwiY2xpY2tPbkV4aXRCdG5IYW5kbGVyIiwiY2hlY2tib3hEaXNwbGF5SGFuZGxlciIsInRhc2siLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlbGVtZW50IiwiZ2V0VGFza0h0bWxTdHJpbmciLCJpbnNlcnRBZGphY2VudEhUTUwiLCJjcmVhdGVkRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkVGFza0V2ZW50TGlzdGVuZXJzIiwic3R5bGUiLCJtYXJnaW5MZWZ0Iiwib3BhY2l0eSIsInRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24iLCJzZXRUaW1lb3V0IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImpzX1Rhc2tzQ29udHJvbGxlciIsImRlbGV0ZVRhc2siLCJldmVudCIsImVkaXRpbmdFbGVtZW50IiwidGFyZ2V0IiwiY2xvc2VzdCIsInRleHRDb250ZW50IiwiYnRuc0NvbnRhaW5lciIsImlubmVySFRNTCIsInRleHRTcGFuSGVpZ2h0IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJvZmZzZXRIZWlnaHQiLCJlZGl0SW5wdXQiLCJ0ZXh0QXJlYSIsImZpcnN0Q2hpbGQiLCJzZWxlY3QiLCJpbnB1dEhhbmRsZXIiLCJuZXh0SGVpZ2h0IiwibWluIiwidGV4dEFyZWFQYWRkaW5nVG9wIiwicGFyc2VGbG9hdCIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiaGVpZ2h0IiwiZWRpdGluZ1Rhc2siLCJjaGVja2JveCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwiYWZ0ZXJFeGl0U3BhbiIsInRhc2tFbGVtZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsYXNzTmFtZSIsImluY2x1ZGVzIiwicm93cyIsInNjcm9sbEhlaWdodCIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsImFmdGVyRWRpdFNwYW4iLCJ1cGRhdGVUYXNrIiwidGFza01vZGVsIiwidGFza3MiLCJuZXdUYXNrIiwicHVzaCIsInNhdmVDaGFuZ2VzVG9Mb2NhbFN0b3JhZ2UiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJjdXIiLCJzcGxpY2UiLCJmaW5kIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInRhc2tWaWV3IiwiY3JlYXRlVGFzayIsImFkZFRhc2tUb1VJIiwicmVhZFRhc2tzIiwiZm9yRWFjaCIsIml0ZW1JRCIsInJlbW92ZVRhc2tGcm9tVUkiLCJuZXdJdGVtU3R5bGUiLCJjcmVhdGVOZXdJdGVtU3R5bGUiLCJ0b2dnbGVTdWJtaXRCdG4iLCJyZW5kZXJUYXNrcyIsImRpc3BsYXkiLCJhZGRUYXNrIiwiZGF5IiwibW9udGgiLCJ5ZWFyIiwiaG91cnMiLCJtaW51dGVzIiwibm93IiwiRGF0ZSIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0Q3VycmVudFRpbWUiLCJpbml0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFB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U0FBQUMsY0FBMkJsRCxFQUFVbUIsTUFBQXFELGVBQXdCb0UsS0FBU0MsS0FLdEVTIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJleHBvcnQgY29uc3QgRE9Nc3RyaW5ncyA9IHtcbiAgICBpbnB1dFN1bW1hcnk6ICcudGFza19fZGVzY3JpcHRpb24nLFxuICAgIG5ld0l0ZW06ICcubmV3LWl0ZW0nLFxuICAgIGNyZWF0ZU5ld0l0ZW06ICcuYWRkLW5ldy1pdGVtJyxcbiAgICBpbnB1dDogJy5hZGQtbmV3LWl0ZW1fX2Rlc2NyaXB0aW9uJyxcbiAgICBlbmFibGVFZGl0OiAnLnRhc2tfX25hbWUnLFxuICAgIHN1Ym1pdEJ0bjogJy5hZGQtbmV3LWl0ZW1fX2J0bi1hZGQtdGFzaycsXG4gICAgY2FuY2VsQnRuOiAnLmFkZC1uZXctaXRlbV9fYnRuLWNhbmNlbCcsXG4gICAgdGFza3NDb250YWluZXI6ICcudGFza3MtY29udGFpbmVyJyxcbiAgICBkZWxldGVCdG46ICcudGFza19fYnRuLWRlbGV0ZScsXG4gICAgZWRpdEJ0bjogJy50YXNrX19idG4tZWRpdCcsXG4gICAgZG9uZUJ0bjogJy50YXNrX19idG4tZG9uZScsXG4gICAgQnRuc0NvbnRhaW5lcjogJy50YXNrX19idG5zJyxcbiAgICBlZGl0QnRuc0NvbnRhaW5lcjogJy50YXNrX19idG5zLS1lZGl0JyxcbiAgICBleGl0RWRpdEJ0bjogJy50YXNrX19idG4tZXhpdC1lZGl0JyxcbiAgICB0YXNrQ2hlY2tib3g6ICcudGFza19fY2hlY2tib3hfc3ZnJyxcbiAgICB0YXNrQ2hlY2tib3hDb250YWluZXI6ICcudGFza19fY2hlY2tib3gnLFxuICAgIGlucHV0Rm9yVGFza1VwZGF0ZTogJy50YXNrX19lZGl0LWlucHV0LXRleHQnLFxuICAgIHRhc2tOYW1lV3JhcHBlcjogJy50YXNrX19uYW1lLXdyYXBwZXInLFxuICAgIHRpbWU6ICcuaGVhZGVyX19kYXRhLS10aW1lJyxcbiAgICBkYXRlOiAnLmhlYWRlcl9fZGF0YS0tZGF0ZSdcblxufSIsIi8vR2VuZXJhdGUgUmFuZG9tIFN0cmluZyAoY3JlYXRpbmcgYSB1bmlxdWUgSUQpXG5leHBvcnQgZnVuY3Rpb24gbWFrZWlkKGxlbmd0aCA9IDUpIHtcbiAgICBsZXQgcmVzdWx0ID0gJydcbiAgICBjb25zdCBjaGFyYWN0ZXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5J1xuICAgIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRUaW1lKCkge1xuXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IGRheSA9IG5vdy5nZXREYXRlKClcblxuICAgIGNvbnN0IG1vbnRocyA9IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlciddXG4gICAgY29uc3QgY3VyTW9udGggPSBub3cuZ2V0TW9udGgoKVxuICAgIGNvbnN0IG1vbnRoID0gbW9udGhzW2N1ck1vbnRoXVxuICAgIGNvbnN0IHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKVxuICAgIGxldCBob3VycyA9IG5vdy5nZXRIb3VycygpXG4gICAgaG91cnMgPSBmb3JtYXRUaW1lKGhvdXJzKVxuICAgIGxldCBtaW51dGVzID0gbm93LmdldE1pbnV0ZXMoKVxuICAgIG1pbnV0ZXMgPSBmb3JtYXRUaW1lKG1pbnV0ZXMpXG5cbiAgICByZXR1cm4geyBkYXksIG1vbnRoLCB5ZWFyLCBob3VycywgbWludXRlcyB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWUodGltZSkge1xuICAgIHJldHVybiB0aW1lIDwgMTAgPyBgMCR7dGltZX1gIDogdGltZVxufVxuIiwiaW1wb3J0IHsgbWFrZWlkIH0gZnJvbSAnLi9oZWxwZXJzJ1xuXG5cblxuLy8gY2xhc3MgVGFzayBkZXNjciBpZCBzdW1tYXJ5IHByaW9yaXR5XG5cbmNsYXNzIFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKHN1bW1hcnkpIHtcbiAgICAgICAgdGhpcy5zdW1tYXJ5ID0gc3VtbWFyeTtcbiAgICAgICAgdGhpcy5pZCA9IG1ha2VpZCg1KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRhc2siLCJpbXBvcnQgeyBET01zdHJpbmdzIH0gZnJvbSAnLi9kb21TdHJpbmdzJ1xuaW1wb3J0IFRhc2tzQ29udHJvbGxlciBmcm9tICcuL1Rhc2tzQ29udHJvbGxlcidcblxuY29uc3QgZG9uZUV4aXRCdG5zID0gYDxpIGNsYXNzPVwidGFza19fYnRuLWRvbmVcIj48L2k+XG48aSBjbGFzcz1cInRhc2tfX2J0bi1leGl0LWVkaXRcIj48L2k+YFxuY29uc3QgZWRpdERlbGV0ZUJ0bnMgPSBgPGkgY2xhc3M9XCJ0YXNrX19idG4tZWRpdFwiPjwvaT5cbjxpIGNsYXNzPVwidGFza19fYnRuLWRlbGV0ZVwiPjwvaT5gXG5jb25zdCBzcGFuSGVpZ2h0V2l0aE9uZUxpbmUgPSAzN1xuY29uc3QgbWF4VGV4dEFyZWFIZWlnaHQgPSAxMDBcblxuXG5jbGFzcyBUYXNrVmlldyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3VtbWFyeSA9IHRoaXMudXBkYXRlU3VtbWFyeS5iaW5kKHRoaXMpXG4gICAgICAgIHRoaXMua2V5UHJlc3NIYW5kbGVyID0gdGhpcy5rZXlQcmVzc0hhbmRsZXIuYmluZCh0aGlzKVxuICAgICAgICB0aGlzLmVkaXRCdG5DbGlja0hhbmRsZXIgPSB0aGlzLmVkaXRCdG5DbGlja0hhbmRsZXIuYmluZCh0aGlzKVxuICAgICAgICB0aGlzLmRvY3VtZW50Q2xpY2tIYW5kbGVyID0gdGhpcy5kb2N1bWVudENsaWNrSGFuZGxlci5iaW5kKHRoaXMpXG4gICAgICAgIHRoaXMuY2xpY2tPbkV4aXRCdG5IYW5kbGVyID0gdGhpcy5jbGlja09uRXhpdEJ0bkhhbmRsZXIuYmluZCh0aGlzKVxuICAgICAgICB0aGlzLmNoZWNrYm94RGlzcGxheUhhbmRsZXIgPSB0aGlzLmNoZWNrYm94RGlzcGxheUhhbmRsZXIuYmluZCh0aGlzKVxuICAgIH1cblxuICAgIGFkZFRhc2tUb1VJKHRhc2spIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihET01zdHJpbmdzLnRhc2tzQ29udGFpbmVyKVxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5nZXRUYXNrSHRtbFN0cmluZyh0YXNrKVxuICAgICAgICBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBlbGVtZW50KVxuXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFzay5pZClcbiAgICAgICAgdGhpcy5hZGRUYXNrRXZlbnRMaXN0ZW5lcnMoY3JlYXRlZEVsZW1lbnQpXG5cbiAgICB9XG5cbiAgICByZW1vdmVUYXNrRnJvbVVJKGlkKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcbiAgICAgICAgLy9BbmltYXRpb24gb24gZGVsZXRlXG4gICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9ICctMTAwcHgnXG4gICAgICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcwJ1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIDAuM3MnXG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uID0gJ2N1YmljLWJlemllcigwLjQyLCAwLCAxLCAxKSdcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KVxuICAgICAgICB9LCAzMDApXG4gICAgfVxuXG4gICAgYWRkVGFza0V2ZW50TGlzdGVuZXJzKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKERPTXN0cmluZ3MuZWRpdEJ0bikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmVkaXRCdG5DbGlja0hhbmRsZXIpXG4gICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcihET01zdHJpbmdzLmRlbGV0ZUJ0bikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBUYXNrc0NvbnRyb2xsZXIuZGVsZXRlVGFzaylcbiAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKERPTXN0cmluZ3MudGFza0NoZWNrYm94KS5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBUYXNrc0NvbnRyb2xsZXIuZGVsZXRlVGFzaylcbiAgICB9XG5cblxuICAgIGVkaXRCdG5DbGlja0hhbmRsZXIoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZWRpdGluZ0VsZW1lbnQgPSBldmVudC50YXJnZXQuY2xvc2VzdChcIi50YXNrXCIpXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZWRpdGluZ0VsZW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tfX25hbWUnKS50ZXh0Q29udGVudFxuXG4gICAgICAgIGNvbnN0IGJ0bnNDb250YWluZXIgPSBldmVudC50YXJnZXQuY2xvc2VzdChET01zdHJpbmdzLkJ0bnNDb250YWluZXIpXG5cbiAgICAgICAgdGhpcy5jaGVja2JveERpc3BsYXlIYW5kbGVyKGVkaXRpbmdFbGVtZW50KTtcblxuICAgICAgICAvL1JlcGxhY2luZyBidXR0b25zIFxuICAgICAgICBidG5zQ29udGFpbmVyLmlubmVySFRNTCA9IGRvbmVFeGl0QnRuc1xuXG4gICAgICAgIC8vU3VtbWFyeSBjb250YWluZXJcbiAgICAgICAgY29uc3QgdGFza05hbWVXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWRpdGluZ0VsZW1lbnQuaWQpLnF1ZXJ5U2VsZWN0b3IoRE9Nc3RyaW5ncy50YXNrTmFtZVdyYXBwZXIpXG4gICAgICAgIGNvbnN0IHRleHRTcGFuSGVpZ2h0ID0gdGFza05hbWVXcmFwcGVyLmZpcnN0RWxlbWVudENoaWxkLm9mZnNldEhlaWdodDtcblxuICAgICAgICAvL0FkZGluZyBldmVudGxpc3RlbmVycyBkb25lRXhpdEJ0bnNcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihET01zdHJpbmdzLmRvbmVCdG4pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy51cGRhdGVTdW1tYXJ5KVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKERPTXN0cmluZ3MuZXhpdEVkaXRCdG4pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsaWNrT25FeGl0QnRuSGFuZGxlcihldmVudCwgdmFsdWUsIHRhc2tOYW1lV3JhcHBlciwgYnRuc0NvbnRhaW5lcilcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBlZGl0SW5wdXQgPSBgPHRleHRhcmVhIGNsYXNzPVwidGFza19fZWRpdC1pbnB1dC10ZXh0IFwiIHR5cGU9XCJ0ZXh0XCIgYXV0b2ZvY3VzPiR7dmFsdWV9PC90ZXh0YXJlYT5gXG4gICAgICAgIHRhc2tOYW1lV3JhcHBlci5pbm5lckhUTUwgPSBlZGl0SW5wdXRcblxuXG4gICAgICAgIGNvbnN0IHRleHRBcmVhID0gdGFza05hbWVXcmFwcGVyLmZpcnN0Q2hpbGRcbiAgICAgICAgdGV4dEFyZWEuc2VsZWN0KClcblxuICAgICAgICB0ZXh0QXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuaW5wdXRIYW5kbGVyKVxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZG9jdW1lbnRDbGlja0hhbmRsZXIsIHRydWUpXG4gICAgICAgIHRleHRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgdGhpcy5rZXlQcmVzc0hhbmRsZXIpXG5cbiAgICAgICAgLy8vTWFraW5nIHRleHRhcmVhIGluaXRpYWwgc2l6ZVxuICAgICAgICBsZXQgbmV4dEhlaWdodCA9IE1hdGgubWluKG1heFRleHRBcmVhSGVpZ2h0LCB0ZXh0U3BhbkhlaWdodClcbiAgICAgICAgY29uc3QgdGV4dEFyZWFQYWRkaW5nVG9wID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0ZXh0QXJlYSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSlcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUuaGVpZ2h0ID0gbmV4dEhlaWdodCArICgyICogdGV4dEFyZWFQYWRkaW5nVG9wKSArICdweCdcbiAgICB9XG5cbiAgICBjaGVja2JveERpc3BsYXlIYW5kbGVyKGVkaXRpbmdUYXNrKSB7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZWRpdGluZ1Rhc2sucXVlcnlTZWxlY3RvcihET01zdHJpbmdzLnRhc2tDaGVja2JveENvbnRhaW5lcilcbiAgICAgICAgaWYgKGNoZWNrYm94LmNsYXNzTGlzdC5jb250YWlucygndGFza19fY2hlY2tib3gtLWhpZGRlbicpKSB7XG4gICAgICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKCd0YXNrX19jaGVja2JveC0taGlkZGVuJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ3Rhc2tfX2NoZWNrYm94LS1oaWRkZW4nKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xpY2tPbkV4aXRCdG5IYW5kbGVyKGV2ZW50LCB2YWx1ZSwgdGFza05hbWVXcmFwcGVyLCBidG5zQ29udGFpbmVyKSB7XG4gICAgICAgIGNvbnN0IGFmdGVyRXhpdFNwYW4gPSBgIDxzcGFuIGNsYXNzPVwidGFza19fbmFtZVwiPiR7dmFsdWV9PC9zcGFuPmBcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLnRhc2snKVxuXG4gICAgICAgIHRhc2tOYW1lV3JhcHBlci5pbm5lckhUTUwgPSBhZnRlckV4aXRTcGFuXG4gICAgICAgIGJ0bnNDb250YWluZXIuaW5uZXJIVE1MID0gZWRpdERlbGV0ZUJ0bnNcblxuICAgICAgICB0aGlzLmNoZWNrYm94RGlzcGxheUhhbmRsZXIodGFza0VsZW1lbnQpXG5cbiAgICAgICAgdGhpcy5hZGRUYXNrRXZlbnRMaXN0ZW5lcnModGFza0VsZW1lbnQpXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5kb2N1bWVudENsaWNrSGFuZGxlciwgdHJ1ZSlcbiAgICB9XG5cbiAgICBkb2N1bWVudENsaWNrSGFuZGxlcihldmVudCkge1xuICAgICAgICBjb25zdCBpZ25vcmluZ0VsZW1lbnRzID0gWyd0YXNrX19lZGl0LWlucHV0LXRleHQnLCAndGFza19fYnRuLWRvbmUnLCAndGFza19fYnRuLWV4aXQtZWRpdCddXG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3RbMF1cblxuICAgICAgICBpZiAoIWlnbm9yaW5nRWxlbWVudHMuaW5jbHVkZXMoY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdW1tYXJ5KClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlucHV0SGFuZGxlcihldmVudCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgICBldmVudC50YXJnZXQucm93cyA9IDFcbiAgICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLmhlaWdodCA9ICdhdXRvJ1xuICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICBldmVudC50YXJnZXQuc3R5bGUuaGVpZ2h0ID0gc3BhbkhlaWdodFdpdGhPbmVMaW5lICsgJ3B4J1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3Rhc2tfX2VkaXQtaW5wdXQtdGV4dC0taW52YWxpZCcpXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IGV2ZW50LnRhcmdldC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICBsZXQgbmV4dEhlaWdodCA9IE1hdGgubWluKG1heFRleHRBcmVhSGVpZ2h0LCBzY3JvbGxIZWlnaHQpXG5cbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zdHlsZS5oZWlnaHQgPSBuZXh0SGVpZ2h0ICsgJ3B4J1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3Rhc2tfX2VkaXQtaW5wdXQtdGV4dC0taW52YWxpZCcpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBrZXlQcmVzc0hhbmRsZXIoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN1bW1hcnkoZXZlbnQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTdW1tYXJ5KCkge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoRE9Nc3RyaW5ncy5pbnB1dEZvclRhc2tVcGRhdGUpXG4gICAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWVcbiAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBpbnB1dC5jbG9zZXN0KFwiLnRhc2tcIilcbiAgICAgICAgY29uc3QgaWQgPSB0YXNrRWxlbWVudC5pZFxuXG4gICAgICAgIGNvbnN0IGJ0bnNDb250YWluZXIgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKERPTXN0cmluZ3MuQnRuc0NvbnRhaW5lcilcbiAgICAgICAgY29uc3QgdGFza05hbWVXcmFwcGVyID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihET01zdHJpbmdzLnRhc2tOYW1lV3JhcHBlcilcblxuICAgICAgICB0aGlzLmNoZWNrYm94RGlzcGxheUhhbmRsZXIodGFza0VsZW1lbnQpXG5cbiAgICAgICAgaWYgKHZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRvY3VtZW50Q2xpY2tIYW5kbGVyLCB0cnVlKVxuICAgICAgICAgICAgY29uc3QgYWZ0ZXJFZGl0U3BhbiA9IGAgPHNwYW4gY2xhc3M9XCJ0YXNrX19uYW1lXCI+JHt2YWx1ZX08L3NwYW4+YFxuICAgICAgICAgICAgYnRuc0NvbnRhaW5lci5pbm5lckhUTUwgPSBlZGl0RGVsZXRlQnRuc1xuICAgICAgICAgICAgdGFza05hbWVXcmFwcGVyLmlubmVySFRNTCA9IGFmdGVyRWRpdFNwYW5cbiAgICAgICAgICAgIHRoaXMuYWRkVGFza0V2ZW50TGlzdGVuZXJzKHRhc2tFbGVtZW50KVxuICAgICAgICAgICAgVGFza3NDb250cm9sbGVyLnVwZGF0ZVRhc2soaWQsIHZhbHVlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0VGFza0h0bWxTdHJpbmcodGFzaykge1xuICAgICAgICByZXR1cm4gKGA8ZGl2IGNsYXNzPVwidGFza1wiIGlkPVwiJHt0YXNrLmlkfVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFza19fY29udGVudC13cmFwcGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrX19kZXNjcmlwdGlvblwiPlxuICAgICAgICA8bGFiZWwgY2xhc3M9J3Rhc2tfX2NoZWNrYm94Jz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJjaGVja1wiPlxuICAgICAgICA8c3ZnIHZlcnNpb249XCIxLjFcIiBjbGFzcz1cInRhc2tfX2NoZWNrYm94X3N2Z1wiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIlxuICAgICAgICAgICAgc3R5bGU9XCJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEwMCAxMDA7XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj5cbiAgICAgICAgICAgIDxwb2x5bGluZSBjbGFzcz1cInRhc2tfX2NoZWNrYm94X2xpbmVcIiBwb2ludHM9XCIzLjUsNDUuNSA0MC41LDgyLjUgOTUuNywxNS4zIFwiXG4gICAgICAgICAgICAgICAgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIC8+PC9zdmc+XG4gICAgPC9sYWJlbD5cbiAgICBcbiAgICA8ZGl2IGNsYXNzPVwidGFza19fbmFtZS13cmFwcGVyXCI+XG4gICAgPHNwYW4gY2xhc3M9XCJ0YXNrX19uYW1lXCIgdGl0bGU9XCIke3Rhc2suc3VtbWFyeX1cIj4ke3Rhc2suc3VtbWFyeX08L3NwYW4+XG4gICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInRhc2tfX2J0bnNcIj5cbiAgICA8aSBjbGFzcz1cInRhc2tfX2J0bi1lZGl0XCI+PC9pPlxuICAgIDxpIGNsYXNzPVwidGFza19fYnRuLWRlbGV0ZVwiPjwvaT5cbiAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwibGluZVwiPjwvZGl2PjwvZGl2PmApXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRhc2tWaWV3OyIsImltcG9ydCB7IERPTXN0cmluZ3MgfSBmcm9tICcuL2RvbVN0cmluZ3MnXG5pbXBvcnQgVGFza01vZGVsIGZyb20gJy4vVGFza01vZGVsJ1xuaW1wb3J0IFRhc2tWaWV3IGZyb20gJy4vVGFza1ZpZXcnXG5cblxuY29uc3QgdGFza01vZGVsID0gbmV3IFRhc2tNb2RlbCgpXG5jb25zdCB0YXNrVmlldyA9IG5ldyBUYXNrVmlldygpXG4vLyBDUlVEIC8vIENyZWF0ZSBSZWFkIFVwZGF0ZSBEZWxldGVcblxuY2xhc3MgVGFza3NDb250cm9sbGVyIHtcbiAgICBjcmVhdGVUYXNrKHN1bW1hcnkpIHtcbiAgICAgICAgY29uc3QgbmV3VGFzayA9IHRhc2tNb2RlbC5jcmVhdGVUYXNrKHN1bW1hcnkpXG4gICAgICAgIC8vQWRkIG5ldyB0YXNrIHRvIFVJXG5cbiAgICAgICAgdGFza1ZpZXcuYWRkVGFza1RvVUkoeyAuLi5uZXdUYXNrIH0pXG4gICAgfVxuXG4gICAgcmVuZGVyVGFza3MoKSB7XG4gICAgICAgIGNvbnN0IHRhc2tzID0gdGFza01vZGVsLnJlYWRUYXNrcygpO1xuICAgICAgICB0YXNrcy5mb3JFYWNoKGN1ciA9PiB0YXNrVmlldy5hZGRUYXNrVG9VSShjdXIpKVxuICAgIH1cblxuICAgIGRlbGV0ZVRhc2soZXZlbnQpIHtcbiAgICAgICAgY29uc3QgaXRlbUlEID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIudGFza1wiKS5pZFxuICAgICAgICB0YXNrTW9kZWwuZGVsZXRlVGFzayhpdGVtSUQpXG5cbiAgICAgICAgLy9SZW1vdmUgdGFzayBmcm9tIFVJIFxuICAgICAgICB0YXNrVmlldy5yZW1vdmVUYXNrRnJvbVVJKGl0ZW1JRClcbiAgICAgICAgdGFza01vZGVsLnNhdmVDaGFuZ2VzVG9Mb2NhbFN0b3JhZ2UoKVxuXG4gICAgfVxuXG4gICAgLy9FZGl0IFRhc2tcbiAgICB1cGRhdGVUYXNrKGlkLCB2YWx1ZSkge1xuICAgICAgICB0YXNrTW9kZWwudXBkYXRlVGFzayhpZCwgdmFsdWUpXG4gICAgfTtcblxufVxuXG5cbmNvbnN0IHRhc2tzQ29udHJvbGxlciA9IG5ldyBUYXNrc0NvbnRyb2xsZXIoKVxuXG5leHBvcnQgZGVmYXVsdCB0YXNrc0NvbnRyb2xsZXIiLCJpbXBvcnQgVGFzayBmcm9tICcuL1Rhc2snXG5cbmNsYXNzIFRhc2tNb2RlbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudGFza3MgPSBbXVxuXG4gICAgfVxuXG4gICAgY3JlYXRlVGFzayhzdW1tYXJ5KSB7XG4gICAgICAgIC8vQ3JlYXRlIE5ldyBUYXNrXG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSBuZXcgVGFzayhzdW1tYXJ5KVxuXG4gICAgICAgIC8vUHVzaCBuZXcgdGFzayBpbnRvIGRhdGEgc3RydWN0dXJlICh0aGlzLnRhc2tzIGFycmF5KVxuICAgICAgICB0aGlzLnRhc2tzLnB1c2gobmV3VGFzaylcbiAgICAgICAgdGhpcy5zYXZlQ2hhbmdlc1RvTG9jYWxTdG9yYWdlKClcbiAgICAgICAgcmV0dXJuIG5ld1Rhc2tcblxuICAgIH1cblxuICAgIHJlYWRUYXNrcygpIHtcbiAgICAgICAgdGhpcy50YXNrcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykpIHx8IFtdXG4gICAgICAgIHJldHVybiB0aGlzLnRhc2tzXG4gICAgfVxuXG4gICAgLy9EZWxldGUgdGFza1xuICAgIGRlbGV0ZVRhc2soaWQpIHtcbiAgICAgICAgLy9EZWxldGUgdGFzayBmcm9tIGRhdGEgc3RydWN0dXJlXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy50YXNrcy5maW5kSW5kZXgoY3VyID0+IGN1ci5pZCA9PT0gaWQpXG5cbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy50YXNrcy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNhdmVDaGFuZ2VzVG9Mb2NhbFN0b3JhZ2UoKVxuICAgIH1cblxuICAgIC8vRWRpdCBUYXNrXG4gICAgdXBkYXRlVGFzayhpZCwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2sgPSB0aGlzLnRhc2tzLmZpbmQoY3VyID0+IGN1ci5pZCA9PT0gaWQpXG4gICAgICAgIGN1cnJlbnRUYXNrLnN1bW1hcnkgPSB2YWx1ZVxuICAgICAgICB0aGlzLnNhdmVDaGFuZ2VzVG9Mb2NhbFN0b3JhZ2UoKVxuICAgIH1cblxuXG4gICAgc2F2ZUNoYW5nZXNUb0xvY2FsU3RvcmFnZSgpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGhpcy50YXNrcykpXG4gICAgfVxuXG59XG5cblxuZXhwb3J0IGRlZmF1bHQgVGFza01vZGVsOyIsImltcG9ydCAnLi9tYWluLnNjc3MnO1xuaW1wb3J0IFRhc2tzQ29udHJvbGxlciBmcm9tICcuL2pzL1Rhc2tzQ29udHJvbGxlcidcbmltcG9ydCB7IERPTXN0cmluZ3MgfSBmcm9tICcuL2pzL2RvbVN0cmluZ3MnXG5pbXBvcnQgeyBnZXRDdXJyZW50VGltZSB9IGZyb20gJy4vanMvaGVscGVycydcblxuXG5jb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIGNvbnN0IG5ld0l0ZW1TdHlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoRE9Nc3RyaW5ncy5uZXdJdGVtKVxuICAgIGNvbnN0IGNyZWF0ZU5ld0l0ZW1TdHlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoRE9Nc3RyaW5ncy5jcmVhdGVOZXdJdGVtKVxuICAgIGNvbnN0IHRvZ2dsZVN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoRE9Nc3RyaW5ncy5zdWJtaXRCdG4pXG5cblxuICAgIC8vXG4gICAgVGFza3NDb250cm9sbGVyLnJlbmRlclRhc2tzKClcblxuICAgIC8vQ2xpY2sgb24gYWRkIG5ldyBpdGVtXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihET01zdHJpbmdzLm5ld0l0ZW0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBuZXdJdGVtU3R5bGUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBjcmVhdGVOZXdJdGVtU3R5bGUuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoRE9Nc3RyaW5ncy5pbnB1dCkudmFsdWUgPSAnJ1xuICAgIH0pO1xuXG4gICAgLy9DbGljayBvbiBzdWJtaXQgYnRuXG4gICAgY29uc3QgYWRkVGFzayA9IChzdW1tYXJ5KSA9PiB7XG4gICAgICAgIGlmIChzdW1tYXJ5Lmxlbmd0aCkge1xuICAgICAgICAgICAgVGFza3NDb250cm9sbGVyLmNyZWF0ZVRhc2soc3VtbWFyeSlcbiAgICAgICAgICAgIG5ld0l0ZW1TdHlsZS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1mbGV4J1xuICAgICAgICAgICAgY3JlYXRlTmV3SXRlbVN0eWxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoRE9Nc3RyaW5ncy5zdWJtaXRCdG4pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBzdW1tYXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihET01zdHJpbmdzLmlucHV0KS52YWx1ZTtcbiAgICAgICAgdG9nZ2xlU3VibWl0QnRuLmNsYXNzTGlzdC5hZGQoJ2FkZC1uZXctaXRlbV9fYnRuLWFkZC10YXNrLS1kaXNhYmxlZCcpXG4gICAgICAgIGFkZFRhc2soc3VtbWFyeSlcbiAgICB9KTtcblxuICAgIC8vUHJlc3Mgb24gZW50ZXJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKERPTXN0cmluZ3MuaW5wdXQpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xuICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgYWRkVGFzayhzdW1tYXJ5KVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvL0lucHV0IGNoYW5nZVxuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihET01zdHJpbmdzLmlucHV0KS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdG9nZ2xlU3VibWl0QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FkZC1uZXctaXRlbV9fYnRuLWFkZC10YXNrLS1kaXNhYmxlZCcpXG4gICAgfSk7XG5cblxuICAgIC8vQ2xpY2sgb24gY2FuY2VsIGJ0blxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoRE9Nc3RyaW5ncy5jYW5jZWxCdG4pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBuZXdJdGVtU3R5bGUuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtZmxleCdcbiAgICAgICAgY3JlYXRlTmV3SXRlbVN0eWxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgZGF5LCBtb250aCwgeWVhciwgaG91cnMsIG1pbnV0ZXMgfSA9IGdldEN1cnJlbnRUaW1lKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihET01zdHJpbmdzLmRhdGUpLnRleHRDb250ZW50ID0gYCR7ZGF5fSAke21vbnRofSwgJHt5ZWFyfWBcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKERPTXN0cmluZ3MudGltZSkudGV4dENvbnRlbnQgPSBgJHtob3Vyc306JHttaW51dGVzfWBcblxufTtcblxuXG5pbml0KCk7XG4iXSwic291cmNlUm9vdCI6IiJ9